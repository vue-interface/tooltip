(function(p,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("@popperjs/core")):typeof define=="function"&&define.amd?define(["exports","vue","@popperjs/core"],o):(p=typeof globalThis<"u"?globalThis:p||self,o(p.Tooltip={},p.Vue,p.PopperjsCore))})(this,function(p,o,A){"use strict";const $={ref:"inner",class:"tooltip-inner"},_=o.defineComponent({__name:"Tooltip",props:{offset:{},popper:{},placement:{},target:{},title:{},show:{type:Boolean},top:{type:Boolean},bottom:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(h,{expose:y}){const i=h,u=o.ref(),s=o.ref(),a=o.ref(!1),m=o.ref(),T=o.computed(()=>i.placement?i.placement:i.bottom?"bottom":i.left?"left":i.right?"right":"top"),v=o.computed(()=>({show:a,[`bs-tooltip-${T.value}`]:!0}));function g(){a.value=!0}function e(){a.value=!1}return y({open:g,close:e}),o.onMounted(()=>{var t,n;u.value&&(m.value=A.createPopper(i.target,u.value,Object.assign({placement:T.value,modifiers:[{name:"offset",options:{offset:[((t=i.offset)==null?void 0:t.x)??0,((n=i.offset)==null?void 0:n.y)??6]}},{name:"arrow",options:{element:s.value}}]},i.popper)),o.nextTick(()=>{a.value=i.show}))}),o.onBeforeUnmount(()=>{m.value&&m.value.destroy()}),(t,n)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"el",ref:u,class:o.normalizeClass(["tooltip",v.value]),role:"tooltip"},[o.createElementVNode("div",{ref_key:"arrow",ref:s,class:"tooltip-arrow"},null,512),o.createElementVNode("div",$,[o.renderSlot(t.$slots,"default",{},()=>[o.createTextVNode(o.toDisplayString(t.title),1)])],512)],2))}}),B="";function N(h,y={}){const i=new Map,u=Object.assign({delay:void 0,prefix:"data-tooltip",progressiveEnhancement:!0,triggers:{open:["mouseover:350"],close:["mouseout:100"]}},y),s=u.prefix.replace(/[-]+$/,""),a=new RegExp(`^${s}-`);function m(e){return Array.from(e.attributes).map(t=>[t.name,t.value]).filter(([t])=>t==="title"||t.match(a)).map(([t,n])=>[t.replace(new RegExp(a),""),n]).reduce((t,n)=>Object.assign(t,{[n[0]]:n[1]}),{})}function T(e,t={},n){const c=document.createElement("template"),r=o.h(_,Object.assign({target:e,show:!0},t));o.render(r,c);const[l]=[...c.children];return document.body.append(l),()=>{var d;i.delete(n),(d=r.component)==null||d.ctx.close(),setTimeout(()=>l.remove(),150)}}function v(e){const t=e.getAttribute(`${s}-id`);if(t){const n=i.get(t);n==null||n()}}function g(e,t={}){var x,w;const n=Object.assign({title:e.getAttribute(s)||e.getAttribute("title")},t,m(e));if(!n.title||e.hasAttribute(`${s}-id`))return;const c=Math.random().toString(36).slice(2,7);let r,l;e.setAttribute(`${s}-id`,c),e.removeAttribute("title");function d(f=0){clearTimeout(l),r||(l=setTimeout(()=>{document.contains(e)&&(r=T(e,n,c),i.set(c,r))},f))}function E(f=0){clearTimeout(l),r&&(l=setTimeout(()=>{r&&r(),r=null},f))}function b(f,j){const[O,S]=f.split(":");e.addEventListener(O,()=>j(Number(S||0)))}(((x=e.getAttribute(`${s}-trigger-open`))==null?void 0:x.split(","))||u.triggers.open).map(f=>b(f,d)),(((w=e.getAttribute(`${s}-trigger-close`))==null?void 0:w.split(","))||u.triggers.close).map(f=>b(f,E))}h.mixin({mounted(){if(!u.progressiveEnhancement)return;let e=this.$el;this.$el instanceof Text&&(e=this.$el.parentNode),e instanceof HTMLElement&&g(e);const t=document.createTreeWalker(e,NodeFilter.SHOW_ALL,c=>c instanceof Element?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT);for(;t.nextNode();)t.currentNode instanceof Element&&g(t.currentNode);new MutationObserver(c=>{let r=!1;for(const{removedNodes:l}of c)for(const d of l)if(d instanceof Element)for(const E of d.querySelectorAll(`[${s}-id]`)){const b=i.get(E.getAttribute(`${s}-id`));b&&(r=!0,b())}if(!r)for(const l of i.values())l()}).observe(e,{childList:!0})}}),h.directive("tooltip",{beforeMount(e,t){g(e,Object.assign({},t.modifiers,t.value))},beforeUnmount(e){v(e)}})}p.Tooltip=_,p.TooltipPlugin=N,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=tooltip.umd.cjs.map
